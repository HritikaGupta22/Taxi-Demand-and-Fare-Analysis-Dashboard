# Taxi-Demand-and-Fare-Analysis-Dashboard
This repository contains a dashboard for analyzing taxi demand, fare trends, and trip data. It includes insights on surge pricing, trip distances, payment issues, and spatial demand distribution across the city.
# Methodology
**Data Source:**
The NYC Yellow Taxi Trip dataset for January 2016 was sourced from [Kaggle](https://www.kaggle.com/datasets/elemento/nyc-yellow-taxi-trip-data). Data for a single day was extracted from the original CSV file to simplify processing and analysis.The filtered data was converted from CSV format to JSON format. The JSON data was transformed into a key-value pair format, making it suitable for processing and integration into the real-time data pipeline.

**Data Generation and Kafka Integration:** A data generator was created to simulate real-time streaming of taxi trip records. The data was ingested into a Kafka topic, which acted as a message broker for the pipeline.

**Stream Processing with Apache Flink:** Apache Flink was used to consume data from the Kafka topic. Data was processed, transformed, and structured into tables for downstream usage.

**Data Storage with Elasticsearch:** The processed data was indexed and stored in Elasticsearch, a distributed search and analytics engine, for efficient querying and retrieval.

**Data Visualization with Kibana:** Kibana was integrated with Elasticsearch to visualize the streaming data in real-time. The Kibana dashboard was accessed via localhost:5061 to create meaningful insights and visualizations.

# About Dataset 

The dataset is sourced from the New York City (NYC) Taxi & Limousine Commission (TLC), which maintains detailed records of taxi trips, including Yellow Taxis, Green Taxis, and For-Hire Vehicles (FHVs). It provides information on trip details, passenger counts, fare structures, and geospatial coordinates for pickups and drop-offs. The data supports analysis of taxi demand, pricing, and passenger behavior in NYC.

**Columns in the dataset:**

--  VendorID: Identifies the taxi provider (e.g., Creative Mobile Technologies, VeriFone Inc.)

-- tpep_pickup_datetime / tpep_dropoff_datetime: Timestamps for the start and end of the trip

-- Passenger_count: Number of passengers, manually entered by drivers.

-- Trip_distance: Distance traveled during the trip, measured in miles.

-- Pickup_longitude / Pickup_latitude: Geographic coordinates where the trip started.

-- Dropoff_longitude / Dropoff_latitude: Geographic coordinates where the trip ended.

-- RateCodeID: Fare classification (e.g., standard rate, JFK flat rate, group ride).

-- Store_and_fwd_flag: Indicates if the trip record was temporarily stored due to server disconnection.

-- Payment_type: Method of payment (e.g., credit card, cash, disputed).

-- Fare_amount: Base fare calculated by the meter based on time and distance.

-- Extra, MTA_tax, Improvement_surcharge: Additional charges applied to trips (e.g., rush hour surcharge, mandatory taxes).

-- Tip_amount: Tips paid via credit card (cash tips not included).

-- Tolls_amount: Toll charges incurred during the trip.

-- Total_amount: The total trip cost, excluding cash tips.

# Questions on this dataset
1. What is the average fare amount for all trips?
2. How much total revenue was generated by all trips?
3. How many trips were completed in a day?
4. How does the use of digital payments (e.g., credit cards) compare to cash?
5. At what times of the day do trips peak or drop off?
6. How does the number of passengers vary throughout the day?
7. How do passenger counts change throughout the day relative to fare amounts?
8. How does the count of trips vary with distance?
9. Are fare amount correlated with connectivity issues (Y/N) and specific payment types?
10. Are there specific times when revenue peaks?
11. At which hours is the average trip fare the highest?
12. At what hours are extra charges the highest?
13. Which areas of the city have the highest demand for taxi services?

# Codes Used
**Table creation in Apache Flink**
```
CREATE TABLE taxi_data (
    id BIGINT PRIMARY KEY,
    VendorID INTEGER,
    tpep_pickup_datetime TIMESTAMP,  -- Simplified TIMESTAMP type
    tpep_dropoff_datetime TIMESTAMP,
    passenger_count INTEGER,
    trip_distance FLOAT,
    pickup_longitude DOUBLE,
    pickup_latitude DOUBLE,
    RatecodeID INTEGER,
    store_and_fwd_flag STRING,
    dropoff_longitude DOUBLE,
    dropoff_latitude DOUBLE,
    payment_type INTEGER,
    fare_amount FLOAT,
    extra FLOAT,
    mta_tax FLOAT,
    tip_amount FLOAT,
    tolls_amount FLOAT,
    improvement_surcharge FLOAT,
    total_amount FLOAT,
    WATERMARK FOR tpep_pickup_datetime AS tpep_pickup_datetime - INTERVAL '5' SECOND
) WITH (
    'connector' = 'kafka',
    'topic' = 'Taxi_Data',
    'scan.startup.mode' = 'earliest-offset',
    'properties.bootstrap.servers' = 'kafka:9094',
    'format' = 'json',
    'json.timestamp-format.standard' = 'ISO-8601'  -- Ensure correct timestamp format parsing
);
```
**Creating ELK table**

```
CREATE TABLE taxi_data_index (
    id BIGINT,
    VendorID INTEGER,
    tpep_pickup_datetime TIMESTAMP(3),
    tpep_dropoff_datetime TIMESTAMP(3),
    passenger_count INTEGER,
    trip_distance FLOAT,
    pickup_longitude DOUBLE,
    pickup_latitude DOUBLE,
    RatecodeID INTEGER,
    store_and_fwd_flag STRING,
    dropoff_longitude DOUBLE,
    dropoff_latitude DOUBLE,
    payment_type INTEGER,
    fare_amount FLOAT,
    extra FLOAT,
    mta_tax FLOAT,
    tip_amount FLOAT,
    tolls_amount FLOAT,
    improvement_surcharge FLOAT,
    total_amount FLOAT
) WITH (
    'connector' = 'elasticsearch-7',
    'hosts' = 'http://elasticsearch:9200',
    'index' = 'taxi_data_index',
    'format' = 'json',
    'json.fail-on-missing-field' = 'false',
    'json.ignore-parse-errors' = 'true',
    'json.timestamp-format.standard' = 'ISO-8601'
);

```
**Data Storage with Elasticsearch**
```
INSERT INTO taxi_data_index
SELECT *
FROM taxi_data;
```
**Creating ELK table for Map Charts**
```
CREATE TABLE geo_taxi_data (
    VendorID INTEGER,
    RatecodeID INTEGER,
    tpep_pickup_datetime TIMESTAMP(3),
    pickup_location STRING, -- Elasticsearch will interpret this as a geo_point
    passenger_count INTEGER
) WITH (
    'connector' = 'elasticsearch-7',
    'hosts' = 'http://elasticsearch:9200',
    'index' = 'geo_taxi_data',
    'format' = 'json',
    'json.fail-on-missing-field' = 'false',
    'json.ignore-parse-errors' = 'true',
    'json.timestamp-format.standard' = 'ISO-8601'
);
```
```
INSERT INTO geo_taxi_data
SELECT
    VendorID,
    RatecodeID,
    tpep_pickup_datetime,
    CONCAT(CAST(pickup_latitude AS STRING), ',', CAST(pickup_longitude AS STRING)) AS pickup_location,
    passenger_count
FROM taxi_data;
```
#  Dashboard on this dataset

https://github.com/user-attachments/assets/af0b9f92-c613-4386-a7ad-46243345692e

# Inferences

**Average Fare Amount**

The gauge chart displays the average fare amount for all taxi trips recorded in the dataset.The average fare amount is $13.081, which represents the typical fare collected per trip.

**Total Revenue Generated**

This gauge chart shows the total revenue generated by all trips in the dataset. The total revenue generated is $4,378,945.063, which reflects the operational earnings over the dataset's time period.
High revenue indicates strong demand, high fare values, or both.

**Total Trips in a Day** 

This gauge chart represents the total number of trips completed in a single day, providing insight into daily trip volumes. The total number of trips in a day is 276,378, indicating high demand and service utilization. This volume suggests a busy operational day, potentially influenced by weekday schedules, weather, or special events.

**Distribution of Payment Methods**

The donut chart illustrates the proportions of payment methods used by passengers, such as credit cards, cash, or other digital payment options. Payment type credit cards is the most commonly used, followed by cash. This trend highlights the growing adoption of digital payments among passengers.

**Trip Distribution by Hour**

The line chart depicts the number of trips completed at different hours of the day, highlighting temporal patterns in taxi demand.
- Peak hours are observed between 7:00 PM and 3:00 AM, likely due to evening commutes and nightlife activity.
- There’s a significant drop during early morning hours, followed by a steady rise during working hours.
  
**Passengers Over a Day** 

The area chart shows the number of passengers recorded at various times throughout the day, capturing trends in passenger counts.
Passenger counts rise sharply in the morning hours, likely due to commuter traffic, and peak again in the late afternoon and evening, reflecting work commutes and leisure activities.

**Surge Pricing Indicators**

This chart combines a bar graph to represent passenger counts and a line chart to illustrate average fare amounts, both plotted against the hour of pickup.

- The average fare amount peaks around 1:00 AM, likely due to surge pricing during late-night hours when taxi availability is lower but demand is higher (e.g., nightlife and late commuters).
- Passenger counts are highest during the late evening and early morning hours, with a noticeable dip around 4:00 AM when city activity slows down.

**Trip Distance Distribution**
A histogram visualizes the frequency of trips based on various distance ranges, showing how trip volumes vary with distance.
- The majority of trips fall within the 2–10 mile range, reflecting common service areas and typical trip patterns in the city.
- Trip frequency sharply declines for distances exceeding 10 miles, with very few trips exceeding 20 miles.

**Analyzing Payment and Connectivity Issues by Total Fare**

A heatmap illustrates the relationship between payment types, connectivity issues (Yes/No), and fare ranges, offering insights into transaction trends.
- Payment type 1 (likely credit card) is associated with the highest fare amounts, indicating a preference for digital payments among passengers taking higher-cost trips.
- Connectivity issues (marked as "Y") do not significantly impact fare amounts but may affect customer satisfaction or payment processing times.

**Total Revenue Over Time**
A line chart tracks average total revenue (fare amounts, including surcharges and tips) per hour over the selected time period, showcasing revenue trends throughout the day.

- Revenue peaks in the evening hours, reflecting increased trip volumes and potentially higher fare amounts during peak demand times.
- Revenue declines slightly during late-night hours, possibly due to reduced trip volumes despite higher average fares during those times.

**Average Trip Fare by Hour**

The bar chart represents the average trip fare amount (y-axis) at different hours of the day (x-axis). Each bar corresponds to a specific hour, indicating the fare trends throughout the day.

- The average trip fare peaks at 3:30 AM (₹15.01), likely due to high demand during late-night or early-morning hours, such as for airport drop-offs or nightlife activities.
- The fares steadily decrease during the morning and stabilize in the afternoon, possibly reflecting reduced demand or traffic-related factors.
- This analysis can help businesses optimize their fleet allocation and implement surge pricing during peak hours.

**Extra Charges Asked by Hour**

The bar chart illustrates the average extra charges (y-axis) applied to trips during different hours of the day (x-axis). It captures additional fees like surcharges and premiums for specific times.
- The highest extra charges occur between 3 AM and 4 AM, aligning with the peak average trip fares. This indicates that late-night trips often incur additional fees due to limited availability, higher demand, or specific services like airport pickups.
- During daytime hours, extra charges are lower, reflecting either reduced surcharges or more standardized pricing.
- Identifying such patterns is valuable for refining pricing strategies and improving customer communication about fare breakdowns.

 **Demand in Different Parts of the City**
 
The geospatial map shows the pickup locations for taxi trips across the city. Dense clusters of blue points indicate areas with high demand, while sparse points highlight regions with lower demand.

- Central Manhattan exhibits the densest clusters of demand, reflecting its status as a commercial hub. Additionally, high activity is observed near Union City, Roosevelt Island, and LaGuardia Airport, suggesting significant demand from transportation hubs and key locations.
- Outlying areas like Jersey City show sparse pickup points, indicating lower demand in suburban regions.
- These insights can help taxi services optimize driver deployment in high-demand areas, reduce passenger wait times, and enhance service availability during peak hours.
